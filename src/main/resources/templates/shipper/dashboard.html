<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{shipper/layout}">
<head>
  <title>Dashboard - Shipper</title>
  <th:block layout:fragment="styles">
    <link rel="stylesheet" href="/styles/css/shipper/dashboard.css">
  </th:block>
</head>

<body>
  <div layout:fragment="content">
    <h1 class="dashboard-welcome">
      üëã Ch√†o m·ª´ng, 
      <span th:text="${user != null and user.userProfile != null} ? user.userProfile.fullName : 'Shipper'">
        Shipper
      </span>!
    </h1>

    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-header">
          <div>
            <div class="stat-title">ƒê∆°n nh·∫≠n h√¥m nay</div>
            <div class="stat-value" th:text="${todayOrders} ?: 0">12</div>
            <div class="stat-label">ƒê∆°n m·ªõi & ƒêang giao</div>
          </div>
          <i class="fas fa-motorcycle stat-icon"></i>
        </div>
      </div>

      <div class="stat-card success">
        <div class="stat-header">
          <div>
            <div class="stat-title">ƒê√£ giao th√†nh c√¥ng</div>
            <div class="stat-value" th:text="${deliveredOrders} ?: 0">8</div>
            <div class="stat-label">T·ªïng ƒë∆°n ho√†n th√†nh</div>
          </div>
          <i class="fas fa-check-circle stat-icon"></i>
        </div>
      </div>

      <div class="stat-card warning">
        <div class="stat-header">
          <div>
            <div class="stat-title">Thu nh·∫≠p h√¥m nay</div>
            <div class="stat-value" th:text="${income} ?: '‚Ç´0'">‚Ç´1,250,000</div>
            <div class="stat-label">
              <a th:href="@{/shipper/ewallet}" style="color: #667eea; text-decoration: none;">
                Xem chi ti·∫øt V√≠ ‚Üí
              </a>
            </div>
          </div>
          <i class="fas fa-wallet stat-icon"></i>
        </div>
      </div>
    </div>

    <div class="orders-section">
      <div class="section-header">
        <h2 class="section-title">ƒê∆°n h√†ng s·∫Øp t·ªõi</h2>
        <a th:href="@{/shipper/order}" class="section-link">
          Xem t·∫•t c·∫£ <i class="fas fa-arrow-right"></i>
        </a>
      </div>

      <div th:if="${upcomingOrders == null or #lists.isEmpty(upcomingOrders)}" class="empty-state">
        <i class="fas fa-box-open"></i>
        <p>Ch∆∞a c√≥ ƒë∆°n h√†ng m·ªõi n√†o ƒë∆∞·ª£c ph√¢n c√¥ng.</p>
      </div>

      <div th:each="order : ${upcomingOrders}" class="order-item">
        <div class="order-header">
          <div>
            <div class="order-id">#<span th:text="${order.id}">1001</span></div>
            <div class="order-customer" th:text="${order.customerName}">Nguy·ªÖn VƒÉn A</div>
            <div class="order-address">
              <i class="fas fa-map-marker-alt"></i>
              <span th:text="${order.address}">ƒê·ªãa ch·ªâ nh·∫≠n h√†ng...</span>
            </div>
          </div>
          <div style="text-align: right;">
            <span th:class="'order-status ' + (${order.status == 'PICKUP'} ? 'pickup' : 'shipping')"
                  th:text="${order.status}">PICKUP</span>
            <a th:href="@{/shipper/order}" class="order-link">Chi ti·∫øt ‚Üí</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
