<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{customer/layout}">
<head>
<meta charset="UTF-8">
<title>Chi ti·∫øt ƒë∆°n h√†ng</title>

<th:block layout:fragment="styles">
	<link rel="stylesheet" href="/styles/css/customer/base.css">
	<link rel="stylesheet" href="/styles/css/customer/account-sidebar.css">
	<link rel="stylesheet" href="/styles/css/customer/order-detail.css">
	<link rel="stylesheet"
		href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">
</th:block>
</head>

<body>
	<div layout:fragment="content">
		<div class="account-layout">

			<!-- üîπ Sidebar -->
			<div th:replace="~{customer/fragments/account-sidebar :: sidebar}"></div>

			<!-- üîπ Main content -->
			<div class="account-content">
				<div class="order-detail-page">
					<div class="order-detail-card">

						<h2>
							Chi ti·∫øt ƒë∆°n h√†ng #<span th:text="${order.id}"></span>
						</h2>

						<div class="info-box">
							<p>
								<strong>Ng√†y ƒë·∫∑t:</strong> <span
									th:text="${#temporals.format(order.createdAt, 'dd/MM/yyyy HH:mm')}"></span>
							</p>
							<p>
								<strong>Tr·∫°ng th√°i:</strong> <span class="status"
									th:text="${order.status.displayName}"></span>

							</p>
							<p>
								<strong>Ph∆∞∆°ng th·ª©c thanh to√°n:</strong> <span
									th:text="${order.paymentMethod}"></span>
							</p>

							<!-- n·∫øu c√≥ th√¥ng tin ƒë·ªãa ch·ªâ giao h√†ng -->
							<p th:if="${order.delivery != null}">
								<strong>ƒê∆°n v·ªã giao h√†ng:</strong> <span
									th:text="${order.delivery.deliveryName}"></span>
							</p>

                            <p th:if="${order.shippingFee != null}">
                                <strong>Ph√≠ v·∫≠n chuy·ªÉn:</strong> <span
                                    th:text="${#numbers.formatDecimal(order.shippingFee, 0, 'COMMA', 0, 'POINT')} + ' ‚Ç´'"></span>
                            </p>
						</div>

						<h2>Danh s√°ch s·∫£n ph·∫©m</h2>
						<table class="order-detail-table">
							<thead>
								<tr>
									<th>·∫¢nh</th>
									<th>T√™n s·∫£n ph·∫©m</th>
									<th>S·ªë l∆∞·ª£ng</th>
									<th>Gi√°</th>
									<th>Th√†nh ti·ªÅn</th>
								</tr>
							</thead>
							<tbody>
								<tr th:each="d : ${details}">
									<td><a th:href="@{'/product/' + ${d.product.id}}"> <img
											th:src="@{${d.product.images[0].imageUrl}}"
											alt="·∫¢nh s·∫£n ph·∫©m" class="product-thumb">
									</a></td>
									<td><a th:href="@{'/product/' + ${d.product.id}}"
										th:text="${d.product.productName}" class="product-link"></a></td>
									<td th:text="${d.quantity}"></td>
									<td
										th:text="${#numbers.formatDecimal(d.promotionalPrice != null ? d.promotionalPrice : d.price, 0, 'COMMA', 0, 'POINT')} + ' ‚Ç´'"></td>
									<td
										th:text="${#numbers.formatDecimal((d.promotionalPrice != null ? d.promotionalPrice : d.price) * d.quantity, 0, 'COMMA', 0, 'POINT')} + ' ‚Ç´'"></td>
								</tr>
							</tbody>
						</table>

						<!-- üîπ T·ªïng ti·ªÅn -->
						<div class="order-summary-wrapper">
							<div class="order-summary">
								<div class="summary-row">
									<span>T·ªïng ti·ªÅn h√†ng:</span> <span
										th:text="${#numbers.formatDecimal(order.getTotalAmount() != null ? order.getTotalAmount() : order.amountFromCustomer, 0, 'COMMA', 0, 'POINT')} + ' ‚Ç´'"></span>
								</div>

                                <div class="summary-row" th:if="${order.shippingFee != null}">
                                    <span>Ph√≠ v·∫≠n chuy·ªÉn:</span> <span
                                        th:text="${#numbers.formatDecimal(order.shippingFee, 0, 'COMMA', 0, 'POINT')} + ' ‚Ç´'"></span>
                                </div>

								<div class="summary-row total-row">
									<strong>T·ªïng thanh to√°n:</strong> <strong
										th:text="${#numbers.formatDecimal(order.amountFromCustomer, 0, 'COMMA', 0, 'POINT')} + ' ‚Ç´'"></strong>
								</div>
							</div>
						</div>

						<a href="/customer/orders" class="btn-back"> <i
							class="fa fa-arrow-left"></i> Quay l·∫°i
						</a>

					</div>
				</div>
			</div>
		</div>
	</div>

	<th:block layout:fragment="scripts">
		<script src="/styles/js/customer/header.js"></script>
		<script th:src="@{/styles/js/customer/avatar.js}"></script>
		<script src="/styles/js/customer/account-sidebar.js"></script>
	</th:block>
</body>
</html>
