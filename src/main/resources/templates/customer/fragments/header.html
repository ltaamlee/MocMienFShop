<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<meta charset="UTF-8">
<link rel="stylesheet" href="/styles/css/customer/base.css">
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" />
<link
	href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap"
	rel="stylesheet">
</head>
<body>
	<div th:fragment="header">
		<header>
			<div class="header-top">
				<div class="logo">
					<img src="/styles/image/logo.png" alt="Logo">
				</div>

				<div class="search-box">
					<input type="text" placeholder="Tìm kiếm sản phẩm...">
					<button type="submit">
						<i class="fa-solid fa-magnifying-glass"></i>
					</button>
				</div>

				<div class="user-actions">
					<a th:href="@{/login}" sec:authorize="isAnonymous()"> <i
						class="fa-solid fa-right-to-bracket"></i> <strong>Đăng
							nhập</strong>
					</a> <a th:href="@{/register}" sec:authorize="isAnonymous()"> <i
						class="fa-solid fa-user-plus"></i> <strong>Đăng ký</strong>


					</a> </a> <a href="/login" sec:authorize="isAnonymous()"
						class="cart-icon disabled"
						title="Vui lòng đăng nhập để sử dụng giỏ hàng"> <i
						class="fa-solid fa-cart-shopping"></i> Giỏ hàng
					</a>

					<!-- Khi đã đăng nhập -->
					<div sec:authorize="isAuthenticated()">
						<!-- Giỏ hàng cho user thường (không phải admin) -->
						<a th:href="@{/cart}" class="cart-icon"
							sec:authorize="hasRole('CUSTOMER')"> <i
							class="fa-solid fa-cart-shopping"></i> Giỏ hàng
						</a> <span class="welcome"> Xin chào, <strong
							th:text="${#authentication.name}">User</strong>
						</span>
						<!-- Avatar + Dropdown cho cả Admin và User -->

						<div class="user-menu">
							<div class="avatar" id="avatar-btn">
								<img th:if="${user != null and user.imageUrl != null}"
									th:src="@{${user.imageUrl}}" alt="Avatar" class="avatar-img">
								<img th:if="${user == null or user.imageUrl == null}"
									src="/images/avatar-default.png" alt="Avatar"
									class="avatar-img">
							</div>

							<div class="dropdown" id="user-dropdown">
								<div sec:authorize="hasRole('ADMIN')">
									<a th:href="@{/admin/profile}"><i
										class="fa-solid fa-user-shield"></i> Profile</a> <a
										th:href="@{/admin/dashboard}"><i
										class="fa-solid fa-chart-line"></i> Dashboard</a>
								</div>

								<div sec:authorize="!hasRole('ADMIN')">
									<a th:href="@{/account}"><i class="fa-solid fa-user"></i>
										Thông tin tài khoản</a> <a th:href="@{/account/change-password}"><i
										class="fa-solid fa-key"></i> Đổi mật khẩu</a> <a
										th:href="@{/orders}"><i class="fa-solid fa-box"></i> Theo
										dõi đơn hàng</a>
								</div>

								<a th:href="@{/logout}"><i
									class="fa-solid fa-right-from-bracket"></i> Đăng xuất</a>
							</div>
						</div>

					</div>
				</div>
			</div>

			<nav class="header-nav">
				<ul class="nav-links">
					<li><a th:href="@{/home}"><i class="fa-solid fa-house"></i>
							Trang chủ</a></li>
					<li><a th:href="@{/product}"><i
							class="fa-solid fa-box-open"></i> Sản phẩm</a></li>
					<li><a th:href="@{/about}"><i
							class="fa-solid fa-circle-info"></i> Giới thiệu</a></li>
					<li><a th:href="@{/contact}"><i
							class="fa-solid fa-envelope"></i> Liên hệ</a></li>
				</ul>
			</nav>
		</header>
	</div>

</body>
</html>